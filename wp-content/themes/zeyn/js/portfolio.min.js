jQuery(document).ready(function(t){"use strict";t("div.portfolio").length&&t("div.portfolio").each(function(){var e=t(this),i=function(e){function i(e,i,o){for(var a=0;a<e.length;++a){var d=t(e[a]).data("width")+i/o*t(e[a]).data("width");d=Math.floor(10*d)/10,t(e[a]).width(d)}}var o=t(".portfolio-container",e),a=o.outerWidth(!0),d="imagefull"==o.data("type")||"imagefixheightfull"==o.data("type")?0:30,n=o.data("col")?o.data("col"):2;t(window).width()>=992&&t(window).width()<1024?n=o.data("col")?o.data("col")-1:2:t(window).width()>=768&&t(window).width()<992?n=6==o.data("col")?4:5==o.data("col")?3:4==o.data("col")?2:2:t(window).width()>=480&&t(window).width()<768?n=2:t(window).width()<480&&(n=1),n=Math.floor((a-d*(n-1))/n);var l=[],r=0;t(".portfolio-item",o).each(function(e,d){if("text"==o.data("type"))t(this).width(n).height(n),t(".post-image-container",t(this)).height(n/2);else if("imagefixheightfull"==o.data("type")){var s=t(".post-image img",t(d)),c=s.data("width"),h=(s.data("height"),a-r);h>c?(r+=c,l.push(s)):h>=c/2?(l.push(s),r+=c,i(l,a-r,r),l=[],r=0):(i(l,h,l.length>1?r:l[0].data("width")),l=[s],r=c)}else t("img",t(this)).width(n),t(".top-image",t(this)).height(n),t("figcaption",t(this)).outerHeight(n),t(this).width(n).height(n)});var s=function(e){t(".portfolio-navigation .more-post",e.parents(".portfolio")).unbind("click").click(function(o){o.preventDefault();var d=t(this).attr("href"),h=!0;t(this),t(this).remove(),t.ajax({url:d+"&t="+t.now()+"&type="+e.data("type")+"&col="+e.data("col"),type:"get",dataType:"html",async:!1,success:function(o){var d=t(o).find(".portfolio-item"),f=t(o).find(".portfolio-navigation .more-post");d.each(function(o,d){if("text"==e.data("type"))t(d).width(n).height(n),t(".post-image-container",t(d)).height(n/2);else if("imagefixheightfull"==e.data("type")){var s=t(".post-image img",t(d)),c=s.data("width"),h=(s.data("height"),a-r);h>c?(r+=c,l.push(s)):h>=c/2?(l.push(s),r+=c,i(l,a-r,r),l=[],r=0):(i(l,h,l.length>1?r:l[0].data("width")),l=[s],r=c)}else t("img",t(d)).width(n),t(d).width(n).height(n);e.isotope("insert",t(d)).isotope("reloadItems")}),t(".popup-gallery",t("<div>"+o+"</div>")).each(function(e,i){t(i).insertBefore(".md-overlay")}),t(".portfolio-navigation").append(f.css("display","inline-block")),c(),s(e),h=!1,t(window).resize()}})})},c=function(){var e=document.querySelector(".md-overlay");[].slice.call(document.querySelectorAll(".md-trigger")).forEach(function(i){function o(t){classie.remove(d,"md-show"),t&&classie.remove(document.documentElement,"md-perspective")}function a(){o(classie.has(i,"md-setperspective"))}var d=document.querySelector("#"+i.getAttribute("data-modal")),n=d.querySelector(".md-close");i.addEventListener("click",function(){if(!d.loaded)if(t("img",d).length){var o=t("img",d).length,n=1;t("img",d).each(function(){var e=t(this).attr("rel"),i=new Image;t(this).attr("src",e),i.src=e,i.onload=function(){n+=1},(o=n)&&(d.loaded=!0,classie.add(d,"md-show"))})}else d.loaded=!0;d.loaded&&classie.add(d,"md-show"),e.removeEventListener("click",a),e.addEventListener("click",a),classie.has(i,"md-setperspective")&&setTimeout(function(){classie.add(document.documentElement,"md-perspective")},25)}),n.addEventListener("click",function(t){t.stopPropagation(),a()})})};try{if("imagefixheightfull"==o.data("type")){o.isotope({itemSelector:".portfolio-item",layoutMode:"fitRows"});var h=t(".dt-featured-filter a",e),f=t(".portfolio-navigation");h.length&&t(".portfolio-item",o).length&&h.click(function(e){var i=t(this).data("filter");return void 0!==i&&(e.preventDefault(),t(".more-post",f).hide(),"*"==i?o.isotope({filter:"*"}).isotope("reloadItems"):(o.isotope({filter:i}),f.find(i).css("display","inline-block"))),t(this).parents("ul").find("a,li").removeClass("active"),t(this).addClass("active").parent().addClass("active"),!1})}else{o.isotope({itemSelector:".portfolio-item",layoutMode:"masonry",masonry:{columnWidth:n,gutter:d}});var h=t(".dt-featured-filter a",e),f=t(".portfolio-navigation");h.length&&t(".portfolio-item",o).length&&h.click(function(e){var i=t(this).data("filter");return void 0!==i&&(e.preventDefault(),t(".more-post",f).hide(),"*"==i?o.isotope({filter:"*"}).isotope("reloadItems"):(o.isotope({filter:i}),f.find(i).css("display","inline-block"))),t(this).parents("ul").find("a,li").removeClass("active"),t(this).addClass("active").parent().addClass("active"),!1})}s(o)}catch(p){}};i(e),t(window).smartresize(function(){i(e)})})});